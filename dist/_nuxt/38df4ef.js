/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6,13],{286:function(t,n,e){"use strict";e.r(n);var o=e(279);e.d(n,"default",(function(){return o.a}));o.a.registerVersion("firebase","8.6.3","app")},287:function(t,n,e){var content=e(296);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(62).default)("40a619a6",content,!0,{sourceMap:!1})},295:function(t,n,e){"use strict";e(287)},296:function(t,n,e){var o=e(61)(!1);o.push([t.i,"*[data-v-55b60d1c],[data-v-55b60d1c]:after,[data-v-55b60d1c]:before{box-sizing:border-box}ol[class][data-v-55b60d1c],ul[class][data-v-55b60d1c]{padding:0}blockquote[data-v-55b60d1c],body[data-v-55b60d1c],dd[data-v-55b60d1c],dl[data-v-55b60d1c],figcaption[data-v-55b60d1c],figure[data-v-55b60d1c],h1[data-v-55b60d1c],h2[data-v-55b60d1c],h3[data-v-55b60d1c],h4[data-v-55b60d1c],li[data-v-55b60d1c],ol[class][data-v-55b60d1c],p[data-v-55b60d1c],ul[class][data-v-55b60d1c]{margin:0}html[data-v-55b60d1c]{scroll-behavior:smooth}body[data-v-55b60d1c]{min-height:100vh;text-rendering:optimizeSpeed;line-height:1.5}ol[class][data-v-55b60d1c],ul[class][data-v-55b60d1c]{list-style:none}a[data-v-55b60d1c]:not([class]){-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto}img[data-v-55b60d1c]{max-width:100%;display:block}article>*+*[data-v-55b60d1c]{margin-top:1em}button[data-v-55b60d1c],input[data-v-55b60d1c],select[data-v-55b60d1c],textarea[data-v-55b60d1c]{font:inherit}input[data-v-55b60d1c],textarea[data-v-55b60d1c]{outline:none}@media (prefers-reduced-motion:reduce){*[data-v-55b60d1c]{-webkit-animation-duration:.01ms!important;animation-duration:.01ms!important;-webkit-animation-iteration-count:1!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}input[data-v-55b60d1c]::-webkit-inner-spin-button,input[data-v-55b60d1c]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][data-v-55b60d1c]{-moz-appearance:textfield}.content[data-v-55b60d1c]{height:100%}.content[data-v-55b60d1c],.info[data-v-55b60d1c]{width:100%}.info__actions[data-v-55b60d1c]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:30px;align-items:center;margin:20px 0}.info__items[data-v-55b60d1c]{display:grid;grid-template-columns:1fr;grid-gap:20px}",""]),t.exports=o},307:function(t,n,e){"use strict";e.r(n);var o=e(17),r=(e(2),e(46),e(286)),c={name:"Info",data:function(){return{info:null,additional:{name:"",count:null,cost:null}}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getUserInfo();case 2:case"end":return n.stop()}}),n)})))()},computed:{summary:function(){return+this.additional.count*+this.additional.cost},fields:function(){return[{label:"Наименование",key:"name"},{label:"Количество",key:"count"},{label:"Стоимость",key:"cost"},{label:"Сумма",key:"sum"}]}},methods:{createInvoice:function(){window.open("/invoice/".concat(this.$route.params.id)).print()},disableContract:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$fire.firestore.collection("guest").doc(t.$route.params.id);case 2:return e=n.sent,n.prev=3,e.update({"invoice.dailyServices":{breakfast:!1,cleaning:!1,dinner:!1,lunch:!1},rooms:{current:null,number:null,days:null},"invoice.additionalServices":[]}),n.next=7,t.getUserInfo();case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),t.showToast(n.t0,"Ошибка");case 12:case"end":return n.stop()}}),n,null,[[3,9]])})))()},printContract:function(){window.open("/Dogovor-o-predostavlenii-gostinichnyh-uslug.pdf").print()},addAdditionalService:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=t.additional).sum=t.summary,n.next=4,t.$fire.firestore.collection("guest").doc(t.$route.params.id);case 4:return o=n.sent,n.prev=5,o.update({"invoice.additionalServices":r.default.firestore.FieldValue.arrayUnion(e)}),n.next=9,t.getUserInfo();case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),t.showToast(n.t0,"Ошибка");case 14:case"end":return n.stop()}}),n,null,[[5,11]])})))()},totalSum:function(t){var n=0;return t.length?(t.forEach((function(t){n+=+t.sum})),n):n},getUserInfo:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$fire.firestore.collection("guest").doc(t.$route.params.id);case 2:return e=n.sent,n.prev=3,n.next=6,e.get();case 6:o=n.sent,t.info=o.data(),e.onSnapshot((function(n){t.info=n.data()})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),t.showToast(n.t0,"Ошибка");case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()}}},d=(e(295),e(63)),component=Object(d.a)(c,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.info?e("div",{staticClass:"content"},[e("div",{staticClass:"info"},[e("div",{staticClass:"info__actions"},[t.info.rooms.number?e("b-btn",{attrs:{variant:"outline-danger"},on:{click:function(n){return t.createInvoice()}}},[t._v("\n        Выставить счет\n      ")]):t._e(),t._v(" "),t.info.rooms.number?e("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-off-contract",modifiers:{"modal-off-contract":!0}}],attrs:{variant:"outline-danger"}},[t._v("\n        Завершить договор\n      ")]):t._e(),t._v(" "),t.info.rooms.number?e("b-btn",{attrs:{variant:"outline-info"},on:{click:function(n){return t.printContract()}}},[t._v("\n        Распечатать договор\n      ")]):t._e(),t._v(" "),t.info.rooms.number?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add",modifiers:{"modal-add":!0}}],attrs:{variant:"outline-info"}},[t._v("\n        Добавить доп. сервис\n      ")]):t._e()],1),t._v(" "),e("div",{staticClass:"info__items"},[e("div",{staticClass:"info__item"},[t._v("\n        ФИО: "+t._s(t.info.profile.fio)+"\n      ")]),t._v(" "),t.info.rooms.number?e("div",{staticClass:"info__item"},[t._v("\n        Номер: "+t._s(t.info.rooms.number)+"\n      ")]):t._e(),t._v(" "),t.info.rooms.days?e("div",{staticClass:"info__item"},[t._v("\n        Количество дней: "+t._s(t.info.rooms.days)+"\n      ")]):t._e(),t._v(" "),e("div",{staticClass:"info__item"},[t._v("\n        Телефон: "+t._s(t.info.profile.phone)+"\n      ")]),t._v(" "),e("div",{staticClass:"info__item"},[t._v("\n        Пасспортные данные: "+t._s(t.info.profile.passportDetails)+"\n      ")]),t._v(" "),e("div",{staticClass:"info__item"},[t._v("\n        Место регистрации: "+t._s(t.info.profile.placeOfRegistration)+"\n      ")]),t._v(" "),t.info.invoice.dailyServices&&t.info.rooms.number?e("div",{staticClass:"info__item"},[t._v("\n        Дневные сервисы:\n        "),e("ul",[e("li",[t._v("\n            Завтрак:\n            "),t.info.invoice.dailyServices.breakfast?e("span",[t._v("\n              Да\n            ")]):e("span",[t._v("\n              Нет\n            ")])]),t._v(" "),e("li",[t._v("\n            Обед:\n            "),t.info.invoice.dailyServices.lunch?e("span",[t._v("\n              Да\n            ")]):e("span",[t._v("\n              Нет\n            ")])]),t._v(" "),e("li",[t._v("\n            Ужин:\n            "),t.info.invoice.dailyServices.dinner?e("span",[t._v("\n              Да\n            ")]):e("span",[t._v("\n              Нет\n            ")])]),t._v(" "),e("li",[t._v("\n            Уборка:\n            "),t.info.invoice.dailyServices.cleaning?e("span",[t._v("\n              Да\n            ")]):e("span",[t._v("\n              Нет\n            ")])])])]):t._e(),t._v(" "),t.info.rooms.number?e("div",{staticClass:"info__item"},[t._m(0),t._v(" "),e("b-table",{attrs:{fields:t.fields,items:t.info.invoice.additionalServices}})],1):t._e(),t._v(" "),t.info.invoice.additionalServices.length?e("div",{staticClass:"info__item"},[t._v("\n        Итого: "+t._s(t.totalSum(t.info.invoice.additionalServices))+"\n      ")]):t._e()])]),t._v(" "),e("b-modal",{attrs:{id:"modal-add",centered:"",title:"Добавить дополнительный сервис"},on:{ok:t.addAdditionalService}},[e("div",[e("div",{staticClass:"info__items"},[e("b-form-input",{attrs:{placeholder:"Введите наименовение"},model:{value:t.additional.name,callback:function(n){t.$set(t.additional,"name",n)},expression:"additional.name"}}),t._v(" "),e("b-form-input",{attrs:{type:"number",placeholder:"Введите количество"},model:{value:t.additional.count,callback:function(n){t.$set(t.additional,"count",n)},expression:"additional.count"}}),t._v(" "),e("b-form-input",{attrs:{type:"number",placeholder:"Введите стоимость"},model:{value:t.additional.cost,callback:function(n){t.$set(t.additional,"cost",n)},expression:"additional.cost"}})],1)])]),t._v(" "),e("b-modal",{attrs:{id:"modal-off-contract",centered:"",title:"Подтвердите действие"},on:{ok:function(n){return t.disableContract()}}},[t._v("\n    Вы уверены ?\n  ")])],1):t._e()}),[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"info__actions"},[e("span",[t._v("\n            Дополнительные сервисы:\n          ")])])}],!1,null,"55b60d1c",null);n.default=component.exports}}]);